local m={};m.ui={};local a=Menu.Create("Heroes","Hero List","Meepo","Meepo","Saver");local b=nil;local c=0;local d={};if a then m.ui.enable_save=a:Switch("Включить авто-побег",true);m.ui.enable_save:ToolTip("Если включено, Meepo с низким HP будут автоматически уходить на базу и не использоватся в комбо.");m.ui.hp_slider=a:Slider("HP % для отступления",0,100,30,"%d%%");m.ui.hp_slider:ToolTip("Если HP Meepo упадет ниже этого %, он побежит на фонтан. Вернется в бой, когда HP станет значение слайдера + 10%") end;b=Menu.Find("Heroes","Hero List","Meepo","Main Settings","Hero Settings","Combo Key");local e={[Enum.TeamNum.TEAM_RADIANT]=Vector(-7019,-6534,384),[Enum.TeamNum.TEAM_DIRE]=Vector(6846,6251,384)};m.OnUpdate=function() if not b or not m.ui.hp_slider or not m.ui.enable_save or not m.ui.enable_save:Get() or not Engine.IsInGame() then return end;if not Input.IsKeyDown(b:Get()) then return end;local f=GlobalVars.GetCurTime();if f<c then return end;c=f+1.0;local g=Heroes.GetLocal();if not g or not Entity.IsAlive(g) or NPC.GetUnitName(g)~="npc_dota_hero_meepo" then return end;local h=Players.GetLocal();if not h then return end;local i=Player.GetPlayerID(h);local j={};local k=m.ui.hp_slider:Get()/100.0;local l=k+0.10;local n=e[Entity.GetTeamNum(g)];local o=NPC.HasShard(g);local p={};for _,q in pairs(NPCs.GetAll()) do if q and Entity.IsAlive(q) and NPC.GetUnitName(q)=="npc_dota_hero_meepo" and not NPC.IsIllusion(q) and NPC.IsControllableByPlayer(q,i) then table.insert(p,q) end end;if #p==0 then return end;for _,r in ipairs(p) do local s=Entity.GetIndex(r);local t=NPC.GetAbility(r,"meepo_petrify");local u=o and t and Ability.IsReady(t);local v=NPC.HasModifier(r,"modifier_meepo_megameepo");if v or u then table.insert(j,r);d[s]=nil else local w=Entity.GetHealth(r)/Entity.GetMaxHealth(r);if d[s] then if w>=l then d[s]=nil;table.insert(j,r) end else if w<k then if n then Player.HoldPosition(h,r);NPC.MoveTo(r,n) end;d[s]=true else table.insert(j,r) end end end end;Player.ClearSelectedUnits(h);if #j>0 then for _,r in pairs(j) do Player.AddSelectedUnit(h,r) end end end;m.OnGameEnd=function() c=0;d={} end;return m